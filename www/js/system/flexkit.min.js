var timer,$el,events="ontouchstart"in window?["touchstart","touchmove touchend touchcancel"]:["mousedown","mousemove mouseup"];window.navigator.pointerEnabled?events=["pointerdown","pointermove pointerup pointercancel lostpointercapture"]:window.navigator.msPointerEnabled&&(events=["MSPointerDown","MSPointerMove MSPointerUp MSPointerCancel MSLostPointerCapture"]);
var start=function(a){timer||($el=$(a.target),timer=window.setTimeout(function(){$el.addClass("touch")},50))},stop=function(a){timer&&(window.clearTimeout(timer),timer=null,$el=$(a.target),setTimeout(function(){$el.removeClass("touch")},10))};$(".dropdown-btn").each(function(){var a=$(this).data("menu"),b=$(this).data("menu-position"),d=$(this).data("menu-height");$(a).addClass("dropdown-menu "+b).height(d)});$(document).on("tap",".menu-btn",function(a){event.preventDefault();showMenu($(this))}).on("tap",".dropdown-btn",function(){event.preventDefault();showDropdown($(this))}).on("tap",".sub-menu-btn",function(){event.preventDefault();$(this).toggleClass("active").nextAll("ul").toggleClass("open")});
function showMenu(a){var b=a.data("menu-position");$(".dropdown-menu").removeClass("open");a.hasClass("active")?$("body").removeAttr("data-menu-open"):($(".menu-btn, .dropdown-btn").removeClass("active"),$("body").attr("data-menu-open",b));a.toggleClass("active")}
function showDropdown(a){var b=a.data("menu");$("body").removeAttr("data-menu-open");a.hasClass("active")?($(".dropdown-btn").removeClass("active"),$(".dropdown-menu").removeClass("open")):($(".menu-btn, .dropdown-btn").removeClass("active"),$(".dropdown-menu").removeClass("open"),a.addClass("active"),$(b).addClass("open"))};(function(){$("table.responsive").each(function(){var a=$("tr",this),b=[];$("th",this).each(function(){var a=$(this).text();b.push(a)});$.each(b,function(b,c){a.find("td:eq("+b+")").prepend('<span class="table-head">'+c+"</span>")})})})();function parseTemplate(a,b,d,c){showLoading();b="undefined"!==typeof b?b:!1;c="function"==typeof c?c:function(a){$("main").replaceWith(a)};$.get(a,function(a){b&&(a=Mustache.to_html(a,b),d?pagesCache(b.page_name,a):"");c(a);hideLoading()})}function pagesCache(a,b){var d={};if("undefined"!==typeof localStorage.pageList){var c=JSON.parse(localStorage.pageList);d[a]=b;d=$.extend(c,d)}else d[a]=b;localStorage.pageList=JSON.stringify(d)}
function goPage(a){if("undefined"!==typeof localStorage.pageList){var b=JSON.parse(localStorage.pageList);$("main").replaceWith(b[a])}};var typeAdd,callBack,errorCallBack;function addPhoto(a,b,d,c){showLoading();callBack="function"==typeof d?d:"";errorCallBack="function"==typeof c?c:"";typeAdd=a;navigator.camera.getPicture(onSuccessImage,onFailImage,{quality:80,encodingType:0,destinationType:a,sourceType:b,mediaType:0})}function onSuccessImage(a){callBack(typeAdd?a:"data:image/jpeg;base64,"+a);hideLoading()}function onFailImage(a){errorCallBack();hideLoading();console.log("Failed because: "+a)};function uploadPhoto(a,b,d){var c=new FileUploadOptions;c.fileKey="file";c.fileName=a.substr(a.lastIndexOf("/")+1);c.mimeType="image/jpeg";c.headers={Connection:"close"};c.chunkedMode=!1;var e={};e.title=b;e.hashTags=d;c.params=e;(new FileTransfer).upload(a,encodeURI(serverIp+"upload"),successUpload,failUpload,c)}function successUpload(a){console.log("Code = "+a.responseCode);console.log("Response = "+a.response);console.log("Sent = "+a.bytesSent);console.log(a.response);onBack(0);hideLoading()}
function failUpload(a){hideLoading();alert("Please try again...");console.log("An error has occurred: Code = "+a.code)};
