var timer,$el,events="ontouchstart"in window?["touchstart","touchmove touchend touchcancel"]:["mousedown","mousemove mouseup"];window.navigator.pointerEnabled?events=["pointerdown","pointermove pointerup pointercancel lostpointercapture"]:window.navigator.msPointerEnabled&&(events=["MSPointerDown","MSPointerMove MSPointerUp MSPointerCancel MSLostPointerCapture"]);
var start=function(a){timer||($el=$(a.target),timer=window.setTimeout(function(){$el.addClass("touch")},50))},stop=function(a){timer&&(window.clearTimeout(timer),timer=null,$el=$(a.target),setTimeout(function(){$el.removeClass("touch")},10))};$(document).on(events[0],start).on(events[1],stop);$(document).on("tap",".menu-btn",function(a){event.preventDefault();showMenu($(this))}).on("tap",".dropdown-btn",function(){event.preventDefault();showDropdown($(this))}).on("tap",".sub-menu-btn",function(){event.preventDefault();$(this).toggleClass("active").nextAll("ul").toggleClass("open")}).on("touchmove",".menu-btn.active, .dropdown-btn.active",function(a){$(".dropdown-menu").removeClass("open");$("body").removeAttr("data-menu-open");$(".menu-btn, .dropdown-btn").removeClass("active")});
function showMenu(a){var b=a.data("menu-position");$(".dropdown-menu").removeClass("open");a.hasClass("active")?$("body").removeAttr("data-menu-open"):($(".menu-btn, .dropdown-btn").removeClass("active"),$("body").attr("data-menu-open",b));a.toggleClass("active")}
function showDropdown(a){var b=a.data("menu");$("body").removeAttr("data-menu-open");a.hasClass("active")?($(".dropdown-btn").removeClass("active"),$(".dropdown-menu").removeClass("open")):($(".menu-btn, .dropdown-btn").removeClass("active"),$(".dropdown-menu").removeClass("open"),a.addClass("active"),$(b).addClass("open"))};(function(){$("table.responsive").each(function(){var a=$("tr",this),b=[];$("th",this).each(function(){var a=$(this).text();b.push(a)});$.each(b,function(b,d){a.find("td:eq("+b+")").prepend('<span class="table-head">'+d+"</span>")})})})();function parseTemplate(a,b,c,d,e){$("body").removeAttr("data-menu-open");showLoading();b="undefined"!==typeof b?b:!1;c="undefined"!==typeof c?c:!1;d="undefined"!==typeof d?d:!1;e="function"===typeof e?e:function(a){$("main").replaceWith(a)};readTextFile(a,function(a){b&&(a=Mustache.to_html(a,b,c),d?pagesCache(b.pageName,a):"");e(a);hideLoading()})}
function readTextFile(a,b){if("function"!==typeof b)return!1;var c=new XMLHttpRequest;c.open("GET",a,!1);c.onreadystatechange=function(){4===c.readyState&&(200!==c.status&&0!=c.status||b(c.responseText))};c.send()}function readTextFileReturn(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.onreadystatechange=function(){if(4===b.readyState&&(200===b.status||0==b.status))return b.responseText};b.send();return b.responseText}
function pagesCache(a,b){var c={};if("undefined"!==typeof localStorage.pageList){var d=JSON.parse(localStorage.pageList);c[a]=b;c=$.extend(d,c)}else c[a]=b;localStorage.pageList=JSON.stringify(c)}function goPage(a){if("undefined"!==typeof localStorage.pageList){var b=JSON.parse(localStorage.pageList);$("main").replaceWith(b[a])}};var typeAdd,callBack,errorCallBack;function addPhoto(a,b,c,d){showLoading();callBack="function"==typeof c?c:"";errorCallBack="function"==typeof d?d:"";typeAdd=a;navigator.camera.getPicture(onSuccessImage,onFailImage,{quality:80,encodingType:0,destinationType:a,sourceType:b,mediaType:0})}function onSuccessImage(a){callBack(typeAdd?a:"data:image/jpeg;base64,"+a);hideLoading()}function onFailImage(a){errorCallBack();hideLoading();console.log("Failed because: "+a)};function uploadPhoto(a,b,c){var d=new FileUploadOptions;d.fileKey="file";d.fileName=a.substr(a.lastIndexOf("/")+1);d.mimeType="image/jpeg";d.headers={Connection:"close"};d.chunkedMode=!1;var e={};e.title=b;e.hashTags=c;d.params=e;(new FileTransfer).upload(a,encodeURI(serverIp+"upload"),successUpload,failUpload,d)}function successUpload(a){console.log("Code = "+a.responseCode);console.log("Response = "+a.response);console.log("Sent = "+a.bytesSent);console.log(a.response);onBack(0);hideLoading()}
function failUpload(a){hideLoading();alert("Please try again...");console.log("An error has occurred: Code = "+a.code)};
